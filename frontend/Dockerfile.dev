# Use a modern, LTS Node.js version that includes necessary build tools.
# This solves both the Node version requirement and the node-gyp build issue.
FROM node:20

# Set the working directory inside the container
WORKDIR /app

# Copy package files first to leverage Docker's layer caching
COPY package*.json ./

# Install dependencies, using --legacy-peer-deps as you correctly identified
# to handle any remaining minor peer version conflicts.
RUN npm install --legacy-peer-deps

# The command to run the Vite development server
CMD ["npm", "run", "dev"]